{% extends 'base.html' %}
{% load static %}

{% block title %}Batallones - {{ brigada|default:'Tercera División' }}{% endblock %}
{% block body_class %}tercedivi-page{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/tercera_division/resultados.css' %}">
<link rel="stylesheet" href="{% static 'css/tercera_division/batallon.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
  <div class="tercedivi-layout">
    <aside class="resultados-sidebar">
      {% include 'tercera_division/resultados.html' %}
    </aside>
    <main class="dashboard-main">
      <div class="batallones-wrap">
        {% include 'includes/back_button.html' with label='Volver' %}
        <h1 class="batallones-title">BATALLONES</h1>
        <div class="batallones-logo-center">
          {% if brigada_icon %}
            <img class="brigada-logo" src="{{ brigada_icon }}" alt="{{ brigada|default:'Brigada' }}" />
          {% elif emblem_left %}
            <img class="brigada-logo" src="{{ emblem_left }}" alt="{{ brigada|default:'Brigada' }}" />
          {% else %}
            <img class="brigada-logo" src="{% static 'images/logo_3div.png' %}" alt="Tercera División" />
          {% endif %}
        </div>
        <div id="batallones-grid" class="batallones-grid" data-static-base="{% static 'images/tercedivi/' %}" data-brigada="{{ brigada|default:'' }}" data-comp-url="{% url 'accounts:companias' %}">
          {% if batallones %}
            {% for b in batallones %}
            <a class="battalion-card" href="{% url 'accounts:companias' %}?brigada={{ brigada|urlencode }}&batallon={{ b.name|urlencode }}">
              <div class="card-content">
                <div class="icon-wrap">
                  {% if b.icon %}
                    <img src="{{ b.icon }}" alt="Icono {{ b.name }}" loading="lazy">
                  {% else %}
                    <img src="{% static 'images/logo_3div.png' %}" alt="{{ b.name }}" loading="lazy">
                  {% endif %}
                </div>
                <h3 class="card-title">{{ b.name }}</h3>
              </div>
            </a>
            {% endfor %}
          {% else %}
            <p id="batallones-empty">No se encontraron batallones para esta brigada.</p>
          {% endif %}
        </div>
      </div>
    </main>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/tercera_division/resultados.js' %}"></script>
<script src="{% static 'js/tercera_division/batallon.js' %}"></script>
{% endblock %}
