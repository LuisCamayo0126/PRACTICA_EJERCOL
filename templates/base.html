{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Mi App{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/auth.css' %}?v=2024110530">
  {% block extra_css %}{% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}">
  <div class="site-wrap">
    <header class="site-header">
      {% include 'includes/header.html' %}
      <div class="header-line"></div>
    </header>

    {% block content %}{% endblock %}
  </div>

  <!-- JavaScript para funcionalidad inteligente del botón "Volver Atrás" -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const backButton = document.querySelector('.btn-back');
      if (backButton) {
        // Función para manejar el click del botón
        function handleBackClick(e) {
          // Si el href es "javascript:history.back()" o similar
          if (backButton.getAttribute('href').includes('history.back')) {
            e.preventDefault();
            
            // Verificar si hay historial disponible
            if (window.history.length > 1) {
              window.history.back();
            } else {
              // Si no hay historial, redirigir a página principal
              window.location.href = "{% url 'accounts:admin_home' %}";
            }
          }
          // Si tiene una URL específica, permitir comportamiento normal
        }
        
        backButton.addEventListener('click', handleBackClick);
        
        // Mostrar/ocultar botón según el contexto
        // Si estamos en la página principal, ocultar el botón
        const currentPath = window.location.pathname;
        if (currentPath === '/accounts/admin/' || currentPath === '/accounts/' || currentPath === '/') {
          backButton.style.display = 'none';
        }
      }
    });
  </script>
  {% block extra_js %}{% endblock %}
</body>

</html>
